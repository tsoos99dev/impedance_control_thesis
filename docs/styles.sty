\usepackage[utf8]{inputenc}
\usepackage[english,hungarian]{babel}
\usepackage{fancyhdr}

%############################################################################
%         MAT
%############################################################################
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{bm}

\let\Bbbk\relax

%############################################################################
%         FONT
%############################################################################
\usepackage{newpxtext,newpxmath}
\usepackage[T1]{fontenc}
\usepackage{microtype}    
\usepackage{relsize}      

%############################################################################
%		Images, margin, etc...
%############################################################################


\usepackage[top=2.5cm, bottom=3.0cm, outer=2.5cm, inner=2.5cm]{geometry} 	%% for COMPUTER USE
%\usepackage[top=2.5cm, bottom=3.0cm, outer=2.0cm, inner=3.0cm]{geometry}  %% for PRINTING

\usepackage{float}
\usepackage{graphicx}
\graphicspath{{./images/}}		
\usepackage{setspace}
\onehalfspacing{}

\usepackage{emptypage}
\usepackage{booktabs}	
\usepackage{array}
\usepackage{multirow}
\usepackage{arydshln}		
\usepackage{lipsum}

\usepackage[
    nottoc,
    notlof,
    notlot
]{tocbibind}

\usepackage{changepage}
\usepackage{titlesec}
\usepackage{calc}

\AfterEndPreamble{
\titleformat{\part}
{
    \fontsize{40}{60}
    \lsstyle
    \bfseries
}
{}
{}
{\centering\thispagestyle{empty}}
[]

\titleformat*{\subsection}
{ 
    \sffamily
    \bfseries
}

\titleformat*{\section}
{ 
    \sffamily
    \bfseries
    \Large
}

\titleformat{name=\chapter,numberless}
%% FORMAT
{
    \sffamily
    \bfseries
}
% LABEL
{} 
% SEP
{ 0pt } 
%% BEFORE CODE
{
    \hspace{-1.45eM}\Huge
}
[ %% AFTER CODE
    \normalsize
    \begin{adjustwidth}{-1eM}{-1eM}
        \vspace{-1eM}\rule{\textwidth+2eM}{0.4pt}
    \end{adjustwidth}
]

\titleformat{\chapter}
{
    \sffamily
    \bfseries
}
{
}
{0pt}
{
    \hspace{-1.7eM}
    \Huge
    \thechapter.~
}
[
    \normalsize
    \begin{adjustwidth}{-1eM}{-1eM}
        \vspace{-1eM}\rule{\textwidth+2eM}{0.4pt}
    \end{adjustwidth}
]
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% BIBLIO
\usepackage{csquotes}
\usepackage[citestyle=numeric-comp,
bibstyle=numeric-comp,
maxbibnames=99,
sorting=nyt,
url=true,
natbib=true,
backend=biber,
defernumbers=true,
giveninits=true,         % given names initials only!
uniquename=init,
mincitenames=1, maxcitenames=1, 
uniquelist=true,
]{biblatex} % Load the package with some options.
\DeclareNameAlias{author}{family-given} % family names first
\DeclareFieldFormat{doi}{% putting doi in one new line instead of breaking it...
    \hfil\penalty90\hfilneg
    \mbox{\mkbibacro{DOI}\addcolon\space
        \ifhyperref
        {\href{https://dx.doi.org/#1}{\nolinkurl{#1}}}
        {\nolinkurl{#1}}}}
\DeclareFieldFormat{url}{% putting doi in one new line instead of breaking it...
    \hfil\penalty90\hfilneg
    \mbox{\mkbibacro{URL}\addcolon\space
        \ifhyperref
        {\href{https://#1}{\nolinkurl{#1}}}
        {\nolinkurl{#1}}}}
\DeclareFieldFormat{isbn}{% putting doi in one new line instead of breaking it...
    \hfil\penalty90\hfilneg%
    \mbox{\mkbibacro{ISBN}\addcolon\space%
        #1}}
\DeclareFieldFormat{issn}{% putting doi in one new line instead of breaking it...
    \hfil\penalty90\hfilneg%
    \mbox{\mkbibacro{ISSN}\addcolon\space%
        #1}}
\DeclareFieldFormat{eventtitle}{\textit{#1}}
\setlength{\bibitemsep}{1em plus 2pt}
%\DeclareSortingTemplate{ymnt}{
    %    \sort{
        %        \field[strside=left,strwidth=4]{sortyear}
        %        \field[strside=left,strwidth=4]{year}
        %        \literal{9999}
        %    }
    %    \sort{
        %        \field{sortkey}
        %        \literal{9999}
        %    }
    %    \sort{
        %        \field{sortname}
        %        \field{author}
        %        \field{editor}
        %        \field{translator}
        %        \field{sorttitle}
        %        \field{title}
        %    }
    %    \sort{
        %        \field{sorttitle}
        %        \field{title}
        %    }
    %}
\addbibresource{bibliography.bib}

% HYPERREF
\usepackage[usenames,dvipsnames,rgb]{xcolor}
\definecolor{bme_red}{RGB}{139,37,50}
\usepackage[colorlinks= true,
			linkcolor = bme_red,
            urlcolor  = bme_red,
            citecolor = bme_red,
            pdfborder={0 0 0},
            unicode = true,
            linktoc=all]{hyperref}

\usepackage{caption}


%############################################################################
%		Fancy header and footer
%############################################################################
\setlength{\headheight}{15.5pt}
%\setlength{\footskip}{35.5pt}

\renewcommand{\chaptermark}[1]{\markboth{\arabic{chapter}.\ \MakeUppercase{#1}}{}}
\pagestyle{fancy}
\fancyheadoffset{1.0eM}				
\renewcommand{\footrulewidth}{0.4pt}
\lhead{}
\rhead{}
\chead{} % \leftmark for chapter, \rightmark for section
\fancyhead[LE]{\leftmark} % jobb megoldás páros páratlan oldalra
\fancyhead[RO]{\rightmark}
\fancyhead[LO,RE]{}
\fancyfootoffset{1.0eM}				
\renewcommand{\footrulewidth}{0.4pt}
\cfoot{\thepage}
\lfoot{}
\rfoot{}

\thispagestyle{fancy}	

